---
id: 3
title: Phase IV Kubernetes DevOps Constitution
stage: constitution
date: 2026-02-08
surface: agent
model: claude-opus-4-6
feature: none
branch: main
user: architect
command: /sp.constitution
labels: ["kubernetes", "devops", "phase-4", "constitution", "helm", "minikube", "docker"]
links:
  spec: null
  ticket: null
  adr: null
  pr: null
files:
  - .specify/memory/constitution.md
tests:
  - none
---

## Prompt

Update the project constitution for Todo Chatbot Phase IV focusing on local Kubernetes deployment with AI-assisted DevOps. The Todo Chatbot project will be governed by the following principles and engineering goals:

1. Cloud-Native First
   - All services (frontend, backend) must be containerized with Docker images.
   - Deployment infrastructure must use Kubernetes manifests and Helm charts for repeatability and scalability.

2. AI-Assisted Infrastructure
   - Use AI tools like Docker AI (Gordon), Claude Code, and kubectl-ai for generating Dockerfiles, Kubernetes YAML, and Helm chart templates.
   - AI usage must be documented with clear prompts in the `.specify` folder to ensure reproducibility.

3. Minikube as Canonical Local Environment
   - Minikube will be the reference environment for development and testing of Kubernetes deployment.
   - Deployment and validation steps must work with Minikube before any production rollout.

4. Helm Packaging Standards
   - Create a Helm chart for the Todo Chatbot with clearly versioned templates and `values.yaml` for environment configuration.
   - Helm values must document required container images, replica counts, service types, and ingress information.
   - Charts must support declarative configuration for both local and future production clusters.

5. Declarative over Imperative
   - Kubernetes resources must be specified declaratively (YAML) generated by AI tools or templates, not manually applied commands without versioned artifacts.
   - All generated manifests and charts must be checked into version control.

6. AI Observability & Ops Insights
   - Even if kagent is unavailable, use kubectl-ai / Claude Code prompts to generate diagnostics (scaling, pod health, logs) for team visibility.
   - Document optimized scaling guidelines (e.g., recommended replicas, resource quotas) in project specs.

7. Test-Driven Deployment Validation
   - Before deploying new configs, define validation steps (e.g., pod ready checks, service responsiveness, health probes) as part of deployment tasks.
   - Use the AI to generate health checks and rollout validation commands.

8. Security & Config Management
   - Secrets and sensitive data (JWT keys, DB credentials) must be stored in Kubernetes Secrets or in `values.yaml` with placeholders, not hardcoded.
   - Ensure environment separation between local dev and future production values.

9. Documentation as Code
   - All architecture decisions, deployment commands, and AI prompts must be documented in `.specify/memory/constitution.md` and referenced in phase specs.
   - Prompt history and AI-generated artifacts are considered first-class project artifacts.

10. Progressive Delivery Mindset
   - Phase IV success metrics include:
     1) Frontend & backend running in Minikube
     2) Helm chart successfully installing both services
     3) Basic AI DevOps

## Response snapshot

Updated the project constitution from v1.2.0 to v1.3.0 (MINOR version bump). Added comprehensive Phase 4 standards covering:

- **New Core Principle**: "Cloud-Native First (Phase 4)" added to Core Principles section
- **10 Phase IV Principles**: Each with MUST-level requirements and rationale (Cloud-Native First, AI-Assisted Infrastructure, Minikube as Canonical Local Environment, Helm Packaging Standards, Declarative over Imperative, AI Observability & Ops Insights, Test-Driven Deployment Validation, Security & Config Management, Documentation as Code, Progressive Delivery Mindset)
- **Container Requirements**: Multi-stage Docker builds, image registry, build tooling
- **Kubernetes Requirements**: Minikube orchestration, declarative manifests, Helm packaging, health checks
- **AI DevOps Tooling**: Docker AI, kubectl-ai, Claude Code for infrastructure generation
- **Phase 4 Project Structure**: k8s/, helm/, docker/ directories
- **Kubernetes Environment Config**: values.yaml, Secrets, ConfigMaps (no .env in containers)
- **Kubernetes Security**: Secret management, non-root containers, RBAC, network policies
- **Infrastructure Standards**: Multi-stage builds, resource limits, helm lint validation
- **Phase 4 Success Criteria**: 8 measurable milestones
- **Phase 4 Constraints**: 8 non-negotiable rules
- **Phase 4 QA**: 7 validation checks

Templates reviewed: plan-template.md, spec-template.md, tasks-template.md - all generic and require no updates.

## Outcome

- Impact: Constitution updated to v1.3.0 with Phase IV Kubernetes & AI DevOps governance
- Tests: N/A (governance document)
- Files: .specify/memory/constitution.md
- Next prompts: `/sp.specify` for Phase 4 feature spec, `/sp.plan` for Phase 4 implementation plan
- Reflection: All 10 user-provided principles mapped to MUST-level constitutional rules with rationale

## Evaluation notes (flywheel)

- Failure modes observed: None
- Graders run and results (PASS/FAIL): Manual review PASS - all placeholders filled, version coherent, dates ISO format
- Prompt variant (if applicable): N/A
- Next experiment (smallest change to try): N/A
